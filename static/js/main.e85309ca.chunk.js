(this["webpackJsonptea-performance-map"]=this["webpackJsonptea-performance-map"]||[]).push([[0],{281:function(e,t,a){},287:function(e,t){},288:function(e,t){},296:function(e,t){},299:function(e,t){},300:function(e,t){},301:function(e,t,a){"use strict";a.r(t);var n=a(32),r=a(103),c=a.n(r),s=a(184),i=a.n(s),o=(a(281),a(78)),l=a(19),d=a(5),u=a(10),h=a(43),p=a(14),m=a(15),b=a(4),f=a.n(b),j=a(12),_=a(190),v=a.n(_),x={teacher_total_full_time_equiv:"Full Time Teachers (Count)",school_admin_total_full_time_equiv:"Full Time Admin Staff (Count)",teacher_total_base_salary:"Teacher Average Base Salary ($)",teacher_1_5_years_full_time_equiv:"Teacher 1-5 Years Experience (Count)",teacher_6_10_years_full_time_equiv:"Teacher 6-10 Years Experience (Count)",teacher_11_20_years_full_time_equiv:"Teacher 11-20 Years Experience (Count)",teacher_20_years_full_time_equiv:"Teacher 20 Years+ Experience (Count)",teacher_1_5_years_base_salary:"Teacher Average Salary 1-5 Years Experience ($)",teacher_6_10_years_base_salary:"Teacher Average Salary 6-10 Years Experience ($)",teacher_11_20_years_base_salary:"Teacher Average Salary 11-20 Years Experience ($)",teacher_male_full_time_equiv:"Full Time Male Teachers (Count)",teacher_female_full_time_equiv:"Full Time Female Teachers (Count)",teacher_no_degree_full_time_equiv:"Teachers with no Degree (Count)",teacher_ba_degree_full_time_equiv:"Teachers with Bachelors Degree (Count)",teacher_ms_degree_full_time_equiv:"Teachers with Masters Degree (Count)",teacher_student_ratio:"Teacher Student Ratio (Ratio)",all_students:"Number of Students (Count)",white:"Number of White Students",african_american:"Number of African Amercian Students",hispanic:"Number of Hispanic Students",at_risk:"Number of At Risk Students",economic_disadvant:"Number of Economic Disadvantaged Students",Grade_Leve_Elementary:0,"Grade_Leve_Elementary/Secondary":0,"Grade_Leve_High School":0,"Grade_Leve_Junior High":0,Grade_Leve_Middle:0,new_rate:"Student Performance (Meets Standards,%)",teacher_experience:"Teacher Experience",principal_experience:"Principal Experience",assistant_principal_count:"Assistant Principal Count"},g=["2019 School Data","Predict Student Performance"];function O(e){return Object(n.jsx)("div",{className:"flex-parent flex-parent--center-main",children:Object(n.jsx)("div",{className:"toggle-group",children:g.map((function(t){return Object(n.jsxs)("label",{className:"toggle-container pt12 pb24",children:[Object(n.jsx)("input",{onChange:e.handleViewChange,checked:e.checkedValue===t,value:t,name:"toggle",type:"radio"},t),Object(n.jsx)("div",{className:"toggle toggle--s ",children:t})]},t)}))})})}function y(e){var t=e.features.map((function(e){return Object(n.jsx)("option",{value:e,children:x[e]},e)})),a=e.prediction_features.map((function(t){return Object(n.jsxs)("div",{className:"flex-parent",children:[Object(n.jsx)("div",{className:"flex-child flex-child--no-shrink w300",children:Object(n.jsxs)("div",{className:"flex-parent flex-parent--space-between-main",children:[Object(n.jsxs)("div",{className:"flex-child",children:[Object(n.jsx)("button",{className:"btn btn--stroke btn--s",name:"minus",value:t,onClick:e.ChangePredictor,children:"-"},t)," "]}),Object(n.jsxs)("span",{className:"txt-s",children:[x[t]," "]}),Object(n.jsx)("div",{className:"flex-child",children:Object(n.jsx)("button",{name:"plus",className:"btn btn--stroke btn--s",value:t,onClick:e.ChangePredictor,children:"+"},t)})]})}),Object(n.jsxs)("div",{className:"flex-child flex-child--grow pl24 txt-bold color-green-light",children:[e.FeatureChange[t]<0?"-":"+"," ",Math.abs(e.FeatureChange[t])]})]})}));return"2019 School Data"===e.SelectedMode||"2019 District Data"===e.SelectedMode?Object(n.jsxs)("div",{className:"inline-block",children:[Object(n.jsx)("p",{className:"txt-s txt-em",children:"Select a variable to change the data displayed on the map."}),Object(n.jsxs)("div",{className:"select-container",children:[Object(n.jsx)("select",{onChange:e.handleFeatureChange,value:e.featureValue,className:"select mb24 mt12 txt-m",children:t}),Object(n.jsx)("div",{className:"select-arrow"})]}),Object(n.jsxs)("div",{className:"round shadow-darken10 px12 py12 txt-s",children:[Object(n.jsxs)("div",{className:"grid mb6",children:[Object(n.jsx)("div",{className:"col h12",style:{backgroundColor:"#000004"}}),Object(n.jsx)("div",{className:"col h12",style:{backgroundColor:"#280b53"}}),Object(n.jsx)("div",{className:"col h12",style:{backgroundColor:"#65156e"}}),Object(n.jsx)("div",{className:"col h12",style:{backgroundColor:"#9f2a63"}}),Object(n.jsx)("div",{className:"col h12",style:{backgroundColor:"#d44842"}}),Object(n.jsx)("div",{className:"col h12",style:{backgroundColor:"#f57d15"}}),Object(n.jsx)("div",{className:"col h12",style:{backgroundColor:"#fac228"}}),Object(n.jsx)("div",{className:"col h12",style:{backgroundColor:"#fcffa4"}})]}),Object(n.jsxs)("div",{className:"grid txt-xs",children:[Object(n.jsx)("div",{className:"col flex-child--grow",children:"Low"}),Object(n.jsx)("div",{className:"col flex-child--grow align-r",children:"High"})]})]})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"txt-m txt-em",children:" Manipulate a variable to to see how it impacts Student Performance."}),a]})}function C(e){var t=e.handleClose,a=e.show,r=(e.children,a?"block":"none");return Object(n.jsx)("div",{class:"flex-parent flex-parent--center-main pt36 z5",children:Object(n.jsxs)("div",{class:"shadow-darken50 flex-child bg-white round relative w600 z5 ".concat(r),children:[Object(n.jsx)("button",{class:"absolute top right px12 py12 z5",onClick:t,children:"X"}),Object(n.jsxs)("div",{class:"px24 py24 z5",children:[Object(n.jsx)("div",{class:"txt-h2 mb12 z5",children:"Texas Education Agency Student Performance Prediction"}),Object(n.jsx)("div",{class:"txt-m z5",children:"I am some modal body content."})]})]})})}var w,N,k=function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(C,{show:e.status,handleClose:e.handleClose}),Object(n.jsxs)("div",{className:"sidebarStyle prose px12 py12",children:[Object(n.jsx)("button",{onClick:e.handleOpen,className:"btn btn--s bg-green-faint color-green",children:"About This Project"}),Object(n.jsx)("h3",{children:"Texas Education Data Map"}),Object(n.jsx)("p",{className:"txt-h5",children:"Visualizing and Predicting student performance using historical achievement data from Texas Education Agency"}),Object(n.jsx)(O,{checkedValue:e.view,handleViewChange:e.onViewChange}),Object(n.jsx)(y,{SelectedMode:e.view,featureValue:e.feature,handleFeatureChange:e.onFeatureChange,features:e.features,prediction_features:e.prediction_features,ChangePredictor:e.onChangePredictor,FeatureChange:e.FeatureChange})]})]})})},S=a(92),P=S.e([654.60815,324.79367,80.76339,50810.824,11.113247,186.8382,5.4065762,.68529254,.58481526,.059748985,.1373166,.0299452,.18817395]),T=S.e([227076.34,74294.406,17059.588,31223866,10.382882,51530.789,56.82655,1.3408921,.24280638,.056179043,.11846075,.029048486,.15276451]),E=a(17),L=a(193),F=a(194),D=a(304),M=a(305),G=a(306),z=function(e,t){return fetch(t).then((function(e){return e.json()})).then((function(t){var a,n=Object(L.a)(t.features,(function(t){return+t.properties[e]})),r=Object(F.a)(t.features,(function(t){return+t.properties[e]})),c=Object(D.a)(r,n,(n-r)/30),s=t.features.map((function(t){return t.properties[e]})),i=Object(M.a)().domain(s).range(Object(D.a)(.1,.98,.1)),o=["interpolate",["linear"],["get",e]],l=Object(E.a)(c);try{for(l.s();!(a=l.n()).done;){var d=a.value;o=o.concat(d,Object(G.a)(i(d)))}}catch(u){l.e(u)}finally{l.f()}return o}))};v.a.accessToken="pk.eyJ1Ijoic2FhZGlxbSIsImEiOiJjamJpMXcxa3AyMG9zMzNyNmdxNDlneGRvIn0.wjlI8r1S_-xxtq2d-W5qPA";var A="https://texas-education.s3-us-west-2.amazonaws.com/2019_rates_v2.min.geojson",q=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.b("https://texas-education.s3-us-west-2.amazonaws.com/model2/model.json");case 2:w=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S.a.csv("https://texas-education.s3-us-west-2.amazonaws.com/default_data_v2.csv",{hasHeader:!0}).prefetch(100).batch(100),N=t;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=["new_rate","all_students","at_risk","african_american","teacher_total_base_salary","teacher_experience","white","principal_experience","assistant_principal_count"],I=["all_students","at_risk","african_american","teacher_total_base_salary","teacher_experience","white","principal_experience","assistant_principal_count"],J=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={modal:!1,score:[],feature:"new_rate",mode:"2019 School Data",all_students:0,at_risk:0,african_american:0,teacher_total_base_salary:0,teacher_experience:0,white:0,principal_experience:0,assistant_principal_count:0,Grade_Leve_Elementary:0,"Grade_Leve_Elementary/Secondary":0,"Grade_Leve_High School":0,"Grade_Leve_Junior High":0,Grade_Leve_Middle:0},n.handleFeatureChange=n.handleFeatureChange.bind(Object(h.a)(n)),n.handleViewChange=n.handleViewChange.bind(Object(h.a)(n)),n.handleChangePredictor=n.handleChangePredictor.bind(Object(h.a)(n)),n.updatePredictions=n.updatePredictions.bind(Object(h.a)(n)),n.updatedPredictionGeometry=n.updatedPredictionGeometry.bind(Object(h.a)(n)),n.modalClose=n.modalClose.bind(Object(h.a)(n)),n.modalOpen=n.modalOpen.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(f.a.mark((function e(){var t,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(this.state.feature,A);case 2:t=e.sent,this.map=new v.a.Map({container:this.mapContainer,style:"mapbox://styles/saadiqm/cjbjougmt08z72rsa7me1duoi",center:[-99.027878,31.319759],zoom:6,maxZoom:12,minZoom:1}),this.map.on("load",(function(){a.map.addSource("schools",{type:"geojson",data:A}),a.map.addSource("prediction",{type:"geojson",data:A}),a.map.addLayer({id:"2019 School Data",type:"circle",source:"schools",paint:{"circle-opacity":1,"circle-color":t,"circle-radius":["interpolate",["linear"],["zoom"],7,2,14,10]}}),a.map.addLayer({id:"Predict Student Performance",type:"circle",source:"prediction",layout:{visibility:"none"},paint:{"circle-opacity":.9,"circle-color":t,"circle-radius":["interpolate",["linear"],["zoom"],7,2,14,10]}})})),this.popup=new v.a.Popup({closeButton:!1,closeOnClick:!1}),this.map.on("mouseenter","2019 School Data",this.popupEnter.bind(this)),this.map.on("mouseleave","2019 School Data",this.popupLeave.bind(this)),V(),q();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){}},{key:"updatePredictions",value:function(){var e=Object(j.a)(f.a.mark((function e(){var t,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,N.forEachAsync((function(e){S.f((function(){var n=[];for(var r in e){var c=S.c(a.state[r]),s=e[r].add(c);n.push(s)}var i=S.d(n,1),o=i.sub(P),d=o.div(T),u=w.predict(d).dataSync();i.dispose(),o.dispose(),d.dispose(),t=[].concat(Object(l.a)(t),Object(l.a)(u))}))}));case 3:this.setState({score:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatedPredictionGeometry",value:function(){var e=this;fetch(A).then((function(e){return e.json()})).then((function(t){t.features.map((function(t,a){t.properties.new_rate=e.state.score[a]})),e.map.getSource("prediction").setData(t)}))}},{key:"modalOpen",value:function(){this.setState({modal:!0})}},{key:"modalClose",value:function(){this.setState({modal:!1})}},{key:"popupEnter",value:function(e){this.map.getCanvas().style.cursor="pointer";for(var t=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties[this.state.feature],r=e.features[0].properties.School_Nam,c=Object(n.jsxs)("div",{className:"prose",children:[Object(n.jsx)("p",{className:"txt-h5 txt-bold",children:r}),Object(n.jsx)("p",{className:"txt-h6 txt-bold",children:x[this.state.feature]}),Object(n.jsx)("p",{className:"txt-l",children:a})]});Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;var s=document.createElement("div");i.a.render(c,s),this.popup.setLngLat(t).setDOMContent(s).addTo(this.map)}},{key:"popupLeave",value:function(e){this.map.getCanvas().style.cursor="",this.popup.remove()}},{key:"handleFeatureChange",value:function(e){var t=this;e.preventDefault(),this.setState({feature:e.target.value},(function(){console.log(t.state.feature),z(t.state.feature,A).then((function(e){t.map.setPaintProperty(t.state.mode,"circle-color",e)}))}))}},{key:"handleViewChange",value:function(e){var t=this,a=this.state.mode;this.setState({mode:e.target.value},(function(){t.map.setLayoutProperty(t.state.mode,"visibility","visible"),t.map.setLayoutProperty(a,"visibility","none"),console.log(t.state.mode)}))}},{key:"handleChangePredictor",value:function(e){var t=this,a=e.target.value;"minus"===e.target.name?this.setState(Object(o.a)({},a,this.state[a]-10),(function(){t.updatePredictions(),t.updatedPredictionGeometry(),console.log(t.state[a])})):this.setState(Object(o.a)({},a,this.state[a]+10),(function(){t.updatePredictions(),t.updatedPredictionGeometry(),console.log(t.state[a])}))}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{children:[Object(n.jsx)(k,{feature:this.state.feature,onFeatureChange:this.handleFeatureChange,view:this.state.mode,onViewChange:this.handleViewChange,features:H,prediction_features:I,onChangePredictor:this.handleChangePredictor,status:this.state.modal,handleClose:this.modalClose,handleOpen:this.modalOpen,FeatureChange:this.state}),Object(n.jsx)("div",{ref:function(t){return e.mapContainer=t},className:"mapContainer"})]})}}]),a}(c.a.Component);i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(J,{})}),document.getElementById("root"))}},[[301,1,2]]]);
//# sourceMappingURL=main.e85309ca.chunk.js.map