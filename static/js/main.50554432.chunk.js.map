{"version":3,"sources":["SideBarContainer.js","App.js","index.js"],"names":["options","feature_dict","SelectMode","props","className","map","option","onChange","handleViewChange","checked","checkedValue","value","name","type","UserInput","optionItems","features","feature","predict_options","prediction_features","onClick","ChangePredictor","SelectedMode","handleFeatureChange","featureValue","Modal","handleClose","show","showHideClassName","children","class","SideBar","model","default_data","status","handleOpen","view","onViewChange","onFeatureChange","onChangePredictor","style","attr","fetch","then","response","json","data","maxValue","max","d","properties","minValue","min","stops","range","my_data","x","quantile","scaleQuantile","domain","paint","stop","concat","interpolateInferno","mapboxgl","accessToken","u","tf","s","predict","a","getDefaultData","csvDataset","csv","hasHeader","prefetch","batch","App","state","modal","score","mode","bind","handleChangePredictor","updatePredictions","updatedPredictionGeometry","modalClose","modalOpen","this","paint_style","Map","container","mapContainer","center","zoom","maxZoom","minZoom","on","addSource","addLayer","popup","Popup","closeButton","closeOnClick","popupEnter","popupLeave","console","log","myscores","forEachAsync","e","key","k","m","add","push","b","c","sub","div","predictions","dataSync","dispose","setState","index","new_rate","getSource","setData","getCanvas","cursor","coordinates","geometry","slice","description","text","Math","abs","lngLat","lng","placeholder","document","createElement","ReactDOM","render","setLngLat","setDOMContent","addTo","remove","preventDefault","target","paint_property","setPaintProperty","previousState","setLayoutProperty","ref","el","React","Component","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.50554432.chunk.js","sourcesContent":["import React from \"react\"\n\nlet options = [\"2019 School Data\",\"Predict Student Performance\"]\n\nlet feature_dict = {\n    \"teacher_total_full_time_equiv\":\"Full Time Teachers (Count)\", \n      \"school_admin_total_full_time_equiv\":\"Full Time Admin Staff (Count)\",\n      \"teacher_total_base_salary\":\"Teacher Average Base Salary ($)\",\n      \"teacher_1_5_years_full_time_equiv\":\"Teacher 1-5 Years Experience (Count)\",\n      \"teacher_6_10_years_full_time_equiv\":\"Teacher 6-10 Years Experience (Count)\",\n      \"teacher_11_20_years_full_time_equiv\":\"Teacher 11-20 Years Experience (Count)\",\n      \"teacher_20_years_full_time_equiv\":\"Teacher 20 Years+ Experience (Count)\",\n      \"teacher_1_5_years_base_salary\":\"Teacher Average Salary 1-5 Years Experience ($)\",\n      \"teacher_6_10_years_base_salary\":\"Teacher Average Salary 6-10 Years Experience ($)\",\n      \"teacher_11_20_years_base_salary\":\"Teacher Average Salary 11-20 Years Experience ($)\",\n      \"teacher_male_full_time_equiv\":\"Full Time Male Teachers (Count)\",\n      \"teacher_female_full_time_equiv\":\"Full Time Female Teachers (Count)\",\n      \"teacher_no_degree_full_time_equiv\":\"Teachers with no Degree (Count)\",\n      \"teacher_ba_degree_full_time_equiv\":\"Teachers with Bachelors Degree (Count)\",\n      \"teacher_ms_degree_full_time_equiv\":\"Teachers with Masters Degree (Count)\",\n      \"teacher_student_ratio\":\"Teacher Student Ratio (Ratio)\",\n      \"all_students\":\"Number of Students (Count)\",\n      \"white\":\"Number of White Students\",\n      \"african_american\":\"Number of African Amercian Students\",\n      \"hispanic\":\"Number of Hispanic Students\",\n      \"at_risk\":\"Number of At Risk Students\",\n      \"economic_disadvant\":\"Number of Economic Disadvantaged Students\",\n      \"Grade_Leve_Elementary\":0,\n      \"Grade_Leve_Elementary/Secondary\":0,\n      \"Grade_Leve_High School\":0,\n      \"Grade_Leve_Junior High\":0,\n      \"Grade_Leve_Middle\":0,\n      \"new_rate\":\"Student Performance (Meets Standards,%)\",\n      \"teacher_experience\":\"Teacher Experience\",\n    \"principal_experience\": \"Principal Experience\",\n    \"assistant_principal_count\": \"Assistant Principal Count\"\n}\n\n// function SelectFeature(props){\n\n\n//     let optionItems = features.map((feature) => <option key={feature} value={feature}>{feature}</option>);\n\n//     return(\n//       <div className=\"inline-block mr6\">\n//         <div className=\"select-container\">\n//           <select onChange={props.handleFeatureChange} value={props.featureValue} className=\"select select--border-yellow mb6 txt-s\">\n//                 {optionItems}\n//           </select>\n//           <div className=\"select-arrow\"></div>\n//         </div>\n//       </div>\n//     )\n// }\n\nfunction SelectMode(props){\n\n    const renderOptions = (option) => {\n        return (\n          <label key={option} className=\"toggle-container pt12 pb24\">\n            <input onChange={props.handleViewChange} checked={props.checkedValue===option} key={option} value={option} name=\"toggle\" type=\"radio\" />\n            <div className=\"toggle toggle--s \">{option}</div>\n          </label>\n        );\n      }\n  \n    return(\n        <div className='flex-parent flex-parent--center-main'>\n            <div className='toggle-group'>\n                {options.map(renderOptions)}\n            </div>\n        </div>\n    )\n\n}\n\nfunction UserInput(props){\n\n    let optionItems = props.features.map((feature) => <option key={feature} value={feature}>{feature_dict[feature]}</option>);\n\n    let predict_options = props.prediction_features.map((feature) => {\n        return (<div className='flex-parent flex-parent--space-between-main'>\n                    <div className='flex-child'><button className='btn btn--stroke btn--s' name = \"minus\" key={feature} value={feature} onClick={props.ChangePredictor}>-</button> </div>\n                    \n                        <span className=\"txt-s\">{feature_dict[feature]}</span>\n                    \n                    <div className='flex-child'><button name = \"plus\" className='btn btn--stroke btn--s' key={feature} value={feature} onClick={props.ChangePredictor}>+</button></div>\n                </div>)\n    });\n\n    if(props.SelectedMode===\"2019 School Data\" ||props.SelectedMode===\"2019 District Data\"  ){\n        return(\n            \n            <div className=\"inline-block\">\n                 <p className=\"txt-s txt-em\">Select a variable to change the data displayed on the map.</p>\n               \n                <div className=\"select-container\">\n                    <select onChange={props.handleFeatureChange} value={props.featureValue} className=\"select mb24 mt12 txt-m\">\n                        {optionItems}\n                    </select>\n                    <div className=\"select-arrow\"></div>\n                </div>\n\n                <div className='round shadow-darken10 px12 py12 txt-s'>\n                    <div className='grid mb6'>\n                        <div className='col bg-blue-faint h12'></div>\n                        <div className='col bg-blue-light h12'></div>\n                        <div className='col bg-blue h12'></div>\n                        <div className='col bg-blue-dark h12'></div>\n                        <div className='col bg-red-faint h12'></div>\n                        <div className='col bg-red-light h12'></div>\n                        <div className='col bg-red h12'></div>\n                        <div className='col bg-red-dark h12'></div>\n                    </div>\n                    <div className='grid txt-xs'>\n                        <div className='col flex-child--grow'>Low</div>\n                        <div className='col flex-child--grow align-r'>High</div>\n                    </div>\n                </div>\n            </div>\n        )\n    }else{\n        return(\n            <div>\n                <p className=\"txt-m txt-em\"> Manipulate a variable to to see how it impacts Student Performance.</p>\n\n                {predict_options}\n            </div>\n\n      \n        )\n    }\n\n    \n}\n\nfunction Modal({ handleClose, show, children }){\n\n    const showHideClassName = show ? \"block\" : \"none\";\n\n    return(\n        <div class='flex-parent flex-parent--center-main pt36 z5'>\n                <div class={`shadow-darken50 flex-child bg-white round relative w600 z5 ${showHideClassName}`}>\n                <button class='absolute top right px12 py12 z5' onClick={handleClose}>\n                    X\n                </button>\n                <div class='px24 py24 z5'>\n                    <div class='txt-h2 mb12 z5'>Texas Education Agency Student Performance Prediction</div>\n                    <div class='txt-m z5'>\n                    I am some modal body content.\n                    </div>\n                </div>\n                </div>\n            </div>\n    )\n\n}\n\n\nfunction SideBar(props) {\n    return (\n\n        <>\n            <div>\n\n        \n                    <Modal show={props.status} handleClose={props.handleClose}></Modal>\n\n\n               \n    \n                <div className='sidebarStyle prose px12 py12'>\n\n                    <button onClick={props.handleOpen} className='btn btn--s bg-green-faint color-green'>About This Project</button>\n\n                    <h3>Texas Education Data Map</h3>\n                    <p className=\"txt-h5\">Visualizing and Predicting student performance using historical achievement data from Texas Education Agency</p>\n\n\n                    <SelectMode checkedValue={props.view} handleViewChange={props.onViewChange}/>\n                    {/* <SelectFeature featureValue={props.feature} handleFeatureChange={props.onFeatureChange}/> */}\n\n                \n                    <UserInput \n                        SelectedMode = {props.view} \n                        featureValue={props.feature} \n                        handleFeatureChange={props.onFeatureChange}\n                        features = {props.features}\n                        prediction_features = {props.prediction_features}\n                        ChangePredictor = {props.onChangePredictor}\n                    />\n\n\n            \n                </div>\n\n            </div>\n\n            </>\n     \n\n\n    )\n}\n\nexport default SideBar\n\n\n\n\n","import React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport SideBar from \"./SideBarContainer\"\nimport ReactDOM from 'react-dom';\nimport * as tf from '@tensorflow/tfjs';\nimport {min,max,range} from 'd3-array';\nimport {scaleQuantile} from 'd3-scale';\nimport {interpolateInferno} from 'd3-scale-chromatic';\n\n\nlet style = (attr) => fetch('https://texas-education.s3-us-west-2.amazonaws.com/2019_rates_v2.min.geojson')\n    .then(response => response.json())\n    .then(data => {\n\n      var maxValue = max(data.features, function (d) { return +d.properties[attr] })\n      var minValue = min(data.features, function (d) { return +d.properties[attr] })\n\n      let stops = range(minValue, maxValue, (maxValue-minValue)/30)\n      \n      let my_data = data.features.map(x => x.properties[attr])\n      \n      let quantile = scaleQuantile()\n        .domain(my_data)\n        .range(range(0.1, 0.98, 0.1))\n\n      let paint = [\"interpolate\", [\"linear\"], [\"get\", attr]]\n\n      for (let stop of stops) {\n        paint = paint.concat(stop, interpolateInferno(quantile(stop))) \n      };\n\n      return paint\n      \n    });\n\n\n\nlet model;\nlet default_data;\n// let scores =[]\n\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoic2FhZGlxbSIsImEiOiJjamJpMXcxa3AyMG9zMzNyNmdxNDlneGRvIn0.wjlI8r1S_-xxtq2d-W5qPA';\n\nconst csvUrl =\n'https://texas-education.s3-us-west-2.amazonaws.com/default_data_v2.csv';\n\nlet u = tf.tensor1d([6.5460815e+02, 3.2479367e+02, 8.0763390e+01, 5.0810824e+04,\n  1.1113247e+01, 1.8683820e+02, 5.4065762e+00, 6.8529254e-01,\n  5.8481526e-01, 5.9748985e-02, 1.3731660e-01, 2.9945200e-02,\n  1.8817395e-01])\n\nlet s = tf.tensor1d([2.2707634e+05, 7.4294406e+04, 1.7059588e+04, 3.1223866e+07,\n  1.0382882e+01, 5.1530789e+04, 5.6826550e+01, 1.3408921e+00,\n  2.4280638e-01, 5.6179043e-02, 1.1846075e-01, 2.9048486e-02,\n  1.5276451e-01])\n\nlet feature_dict = {\n  \"teacher_total_full_time_equiv\":\"Full Time Teachers (Count)\", \n    \"school_admin_total_full_time_equiv\":\"Full Time Admin Staff (Count)\",\n    \"teacher_total_base_salary\":\"Teacher Average Base Salary ($)\",\n    \"teacher_1_5_years_full_time_equiv\":\"Teacher 1-5 Years Experience (Count)\",\n    \"teacher_6_10_years_full_time_equiv\":\"Teacher 6-10 Years Experience (Count)\",\n    \"teacher_11_20_years_full_time_equiv\":\"Teacher 11-20 Years Experience (Count)\",\n    \"teacher_20_years_full_time_equiv\":\"Teacher 20 Years+ Experience (Count)\",\n    \"teacher_1_5_years_base_salary\":\"Teacher Average Salary 1-5 Years Experience ($)\",\n    \"teacher_6_10_years_base_salary\":\"Teacher Average Salary 6-10 Years Experience ($)\",\n    \"teacher_11_20_years_base_salary\":\"Teacher Average Salary 11-20 Years Experience ($)\",\n    \"teacher_male_full_time_equiv\":\"Full Time Male Teachers (Count)\",\n    \"teacher_female_full_time_equiv\":\"Full Time Female Teachers (Count)\",\n    \"teacher_no_degree_full_time_equiv\":\"Teachers with no Degree (Count)\",\n    \"teacher_ba_degree_full_time_equiv\":\"Teachers with Bachelors Degree (Count)\",\n    \"teacher_ms_degree_full_time_equiv\":\"Teachers with Masters Degree (Count)\",\n    \"teacher_student_ratio\":\"Teacher Student Ratio (Ratio)\",\n    \"all_students\":\"Number of Students (Count)\",\n    \"white\":\"Number of White Students\",\n    \"african_american\":\"Number of African Amercian Students\",\n    \"hispanic\":\"Number of Hispanic Students\",\n    \"at_risk\":\"Number of At Risk Students\",\n    \"economic_disadvant\":\"Number of Economic Disadvantaged Students\",\n    \"Grade_Leve_Elementary\":0,\n    \"Grade_Leve_Elementary/Secondary\":0,\n    \"Grade_Leve_High School\":0,\n    \"Grade_Leve_Junior High\":0,\n    \"Grade_Leve_Middle\":0,\n    \"new_rate\":\"Student Performance (Meets Standards,%)\",\n    \"teacher_experience\":\"Teacher Experience\",\n    \"principal_experience\": \"Principal Experience\",\n    \"assistant_principal_count\": \"Assistant Principal Count\"\n}\n\n\nconst predict = async () => {\n  model = await tf.loadLayersModel('https://texas-education.s3-us-west-2.amazonaws.com/model2/model.json')\n}\n\nconst getDefaultData = async () =>{\n  const csvDataset = tf.data.csv(\n    csvUrl, {\n      hasHeader:true\n    }).prefetch(100).batch(100);\n\n  default_data = csvDataset\n\n\n    // const tensors = await csvDataset.toArray();\n    // let a = csvDataset.take(3)\n    // await a.forEachAsync(e => console.log(e));\n    // console.log(tensors)\n\n}\n\n\n\nlet features = [\"new_rate\",\n\"all_students\",\n\"at_risk\",\n\"african_american\",\n\"teacher_total_base_salary\",\n\"teacher_experience\",\n\"white\",\n\"principal_experience\",\n\"assistant_principal_count\"]\n\nlet prediction_features = [\n  \"all_students\",\n  \"at_risk\",\n  \"african_american\",\n  \"teacher_total_base_salary\",\n  \"teacher_experience\",\n  \"white\",\n  \"principal_experience\",\n  \"assistant_principal_count\"\n]\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal:false,\n      score:[],\n      feature: 'new_rate',\n      mode: \"2019 School Data\",\n      \"all_students\":0,\n      \"at_risk\":0,\n      \"african_american\":0,\n      \"teacher_total_base_salary\":0,\n      \"teacher_experience\":0,\n      \"white\":0,\n      \"principal_experience\":0,\n      \"assistant_principal_count\":0,\n      \"Grade_Leve_Elementary\":0,\n      \"Grade_Leve_Elementary/Secondary\":0,\n      \"Grade_Leve_High School\":0,\n      \"Grade_Leve_Junior High\":0,\n      \"Grade_Leve_Middle\":0\n    };\n\n    this.handleFeatureChange = this.handleFeatureChange.bind(this);\n    this.handleViewChange = this.handleViewChange.bind(this);\n    this.handleChangePredictor = this.handleChangePredictor.bind(this)\n    this.updatePredictions = this.updatePredictions.bind(this)\n    this.updatedPredictionGeometry = this.updatedPredictionGeometry.bind(this)\n    this.modalClose = this.modalClose.bind(this)\n    this.modalOpen = this.modalOpen.bind(this)\n\n  }\n\n  async componentDidMount() {\n\n    let paint_style = await style(this.state.feature)\n\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/saadiqm/cjbjougmt08z72rsa7me1duoi',\n      center: [-99.027878, 31.319759],\n      zoom: 6,\n      maxZoom: 12,\n      minZoom: 1\n    });\n\n    this.map.on('load', () => {\n\n      this.map.addSource('schools', {\n        'type': 'geojson',\n        'data': 'https://texas-education.s3-us-west-2.amazonaws.com/2019_rates_v2.min.geojson'\n      });\n\n      // this.map.addSource('districts', {\n      //   'type': 'vector',\n      //   'url': 'mapbox://saadiqm.4nsi58ow'\n      // });\n\n      this.map.addSource('prediction', {\n        'type': 'geojson',\n        'data': 'https://texas-education.s3-us-west-2.amazonaws.com/2019_rates_v2.min.geojson'\n      });\n\n\n      \n\n      this.map.addLayer({\n        'id': '2019 School Data',\n        'type': 'circle',\n        'source': 'schools',\n        // 'source-layer': 'schools2019v2-5et1pd',\n        // 'minzoom':zoomthreshold-1,\n        'paint': {\n          'circle-opacity': 1,\n          'circle-color': paint_style,\n          'circle-radius': [\n            'interpolate', ['linear'], ['zoom'],\n            7,2,\n            14,10,\n          ],\n        },\n        \n      })\n\n      // this.map.addLayer({\n      //   'id': '2019 District Data',\n      //   'type': 'fill',\n      //   'source': 'districts',\n      //   'source-layer': '2019_districts-0ch1eu',\n      //   // 'maxzoom':zoomthreshold,\n      //   \"layout\":{\n      //     \"visibility\":\"none\"\n      //   },\n      //   'paint': {\n      //     'fill-color': [\n      //       'interpolate',\n      //       ['linear'],\n      //       ['get', 'teacher_1_5_years_full_time_equiv'],\n      //       0,\n      //       'red',\n      //       100,\n      //       'blue'\n      //       ],\n      //     'fill-opacity': 0.5,\n      //   }\n      // })\n\n      this.map.addLayer({\n        'id': 'Predict Student Performance',\n        'type': 'circle',\n        'source': 'prediction',\n        \"layout\":{\n          \"visibility\":\"none\"\n        },\n        // 'maxzoom':zoomthreshold,\n        'paint': {\n          'circle-opacity': 0.9,\n          'circle-color': paint_style,\n          'circle-radius': [\n            'interpolate', ['linear'], ['zoom'],\n            7,2,\n            14,10,\n          ],\n        },\n      })\n\n    })\n\n    this.popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n\n\n    this.map.on('mouseenter', '2019 School Data', this.popupEnter.bind(this));\n    this.map.on('mouseleave', '2019 School Data', this.popupLeave.bind(this));\n\n    getDefaultData()\n    predict()\n    \n\n  }\n\n  componentDidUpdate(){\n    console.log(tf.memory());\n  }\n  \n  async updatePredictions(){\n\n    let myscores = []\n\n    await default_data.forEachAsync(e => {\n\n      const y = tf.tidy(() => {\n        let a = []\n\n        for (var key in e) {\n  \n          const k = tf.scalar(this.state[key]);\n          const m = e[key].add(k)\n          a.push(m)\n  \n        }\n  \n        let b = tf.stack(a,1);\n  \n        // scale the input \n        let c = b.sub(u)\n        let d = c.div(s)\n        \n        let predictions = model.predict(d).dataSync()\n  \n        b.dispose()\n        c.dispose()\n        d.dispose()\n  \n        myscores = [...myscores, ...predictions]\n  \n      });\n   \n    });\n\n\n\n    this.setState({score:myscores},()=>{\n      // console.log(this.state.score)\n    })\n\n  }\n\n  updatedPredictionGeometry(){\n\n    fetch('https://texas-education.s3-us-west-2.amazonaws.com/2019_rates.geojson')\n    .then(response => response.json())\n    .then(data => {\n      data.features.map((feature, index) =>{\n        feature.properties.new_rate = this.state.score[index]\n      })\n\n      this.map.getSource('prediction').setData(data);\n      // console.log(data)\n    });\n\n  }\n\n\n  modalOpen() {\n    this.setState({ modal: true });\n  }\n\n  modalClose() {\n    this.setState({modal: false});\n  }\n\n  popupEnter(e){\n    this.map.getCanvas().style.cursor = 'pointer';\n\n      var coordinates = e.features[0].geometry.coordinates.slice();\n      var description = e.features[0].properties[this.state.feature];\n      var name = e.features[0].properties[\"School_Nam\"];\n\n      let text = <div className=\"prose\">\n      <p className=\"txt-h5 txt-bold\">{name}</p>\n      <p className=\"txt-h6 txt-bold\">{feature_dict[this.state.feature]}</p>\n      <p className=\"txt-l\">{description}</p>\n      </div>\n\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n       }\n\n      const placeholder = document.createElement('div');\n      ReactDOM.render(text, placeholder);\n\n      this.popup.setLngLat(coordinates).setDOMContent(placeholder).addTo(this.map);\n  }\n\n  popupLeave(e){\n    this.map.getCanvas().style.cursor = '';\n    this.popup.remove();\n  }\n\n  handleFeatureChange(e){\n    e.preventDefault();\n\n    this.setState({feature:e.target.value}, () => {\n      console.log(this.state.feature)\n\n      style(this.state.feature)\n        .then(paint_property => {\n          this.map.setPaintProperty(this.state.mode, 'circle-color', paint_property);\n        })\n\n\n\n      // let paint_property = null\n\n      // if(this.state.mode===\"2019 School Data\" || this.state.mode===\"Prediction\" ){\n\n      //   if(this.state.feature.includes(\"salary\")){\n      //     paint_property = [\n      //       'interpolate', ['exponential',2], ['zoom'],\n      //       10,['/',['get', this.state.feature],10000],\n      //       14,['/',['get', this.state.feature],10000],\n      //     ]\n      //   }else if(this.state.feature.includes(\"equiv\")){\n      //     paint_property = [\n      //       'interpolate', ['exponential',2], ['zoom'],\n      //       10,['*',['get', this.state.feature],0.1],\n      //       14,['*',['get', this.state.feature],1],\n      //     ]\n      //   }else if(this.state.feature===\"teacher_student_ratio\"){\n      //     paint_property = [\n      //       'interpolate', ['exponential',3], ['zoom'],\n      //       7,['/',['get', this.state.feature],7],\n      //       11,['*',['get', this.state.feature],1.5],\n      //     ]\n      //   }else if(this.state.feature===\"all_students\"){\n      //     paint_property = [\n      //       'interpolate', ['exponential',2], ['zoom'],\n      //       5,['/',[\"sqrt\", ['get', this.state.feature]],7],\n      //       14,['/',[\"sqrt\", ['get', this.state.feature]],2],\n      //     ]\n      //   }else{\n      //     paint_property = [\n      //       'interpolate', ['exponential',3], ['zoom'],\n      //       7,['/',[\"sqrt\", ['get', this.state.feature]],5],\n      //       11,['*',[\"sqrt\", ['get', this.state.feature]],1.5],\n      //     ]\n      //   }\n\n      // }else{\n\n      // }\n\n      // this.map.setPaintProperty(this.state.mode, 'circle-radius', paint_property);\n\n    })\n    // this.map.setPaintProperty('districts', 'fill-color', [\n    //   'interpolate',\n    //   ['linear'],\n    //   ['get', e.target.value],\n    //   0,\n    //   'red',\n    //   100,\n    //   'blue'\n    // ]);\n\n  }\n\n  handleViewChange(e) {\n    let previousState = this.state.mode\n    this.setState({mode:e.target.value}, () => {\n\n      this.map.setLayoutProperty(this.state.mode, 'visibility', 'visible');\n      this.map.setLayoutProperty(previousState, 'visibility', 'none');\n      console.log(this.state.mode)\n    });\n  }\n\n  handleChangePredictor(e){\n    let feature = e.target.value\n\n    if (e.target.name === 'minus') {\n    \n      this.setState({[feature]:this.state[feature]-10},()=>{\n        this.updatePredictions()\n        this.updatedPredictionGeometry()\n        console.log(this.state[feature])\n      })\n\n\n    } else {\n      this.setState({[feature]:this.state[feature]+10},()=>{\n        this.updatePredictions()\n        this.updatedPredictionGeometry()\n        console.log(this.state[feature])\n      })\n    }\n\n  }\n\n  render() {\n    return (\n      <div>\n        <SideBar \n          feature={this.state.feature}\n          onFeatureChange={this.handleFeatureChange}\n          view={this.state.mode}\n          onViewChange={this.handleViewChange}\n          features = {features}\n          prediction_features = {prediction_features}\n          onChangePredictor = {this.handleChangePredictor}\n          status = {this.state.modal}\n          handleClose = {this.modalClose}\n          handleOpen = {this.modalOpen}\n        />\n        <div ref={el => this.mapContainer = el} className='mapContainer' />\n      </div>\n    )\n  }\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}