(this["webpackJsonptea-performance-map"]=this["webpackJsonptea-performance-map"]||[]).push([[0],{278:function(e,t,a){},284:function(e,t){},285:function(e,t){},293:function(e,t){},296:function(e,t){},297:function(e,t){},298:function(e,t,a){"use strict";a.r(t);var r=a(39),i=a(103),n=a.n(i),s=a(184),c=a.n(s),_=(a(278),a(78)),l=a(19),o=a(5),u=a(10),d=a(43),h=a(14),m=a(15),p=a(4),f=a.n(p),v=a(12),y=a(190),b=a.n(y),g=["2019 School Data","Predict Student Performance"],x={teacher_total_full_time_equiv:"Full Time Teachers (Count)",school_admin_total_full_time_equiv:"Full Time Admin Staff (Count)",teacher_total_base_salary:"Teacher Average Base Salary ($)",teacher_1_5_years_full_time_equiv:"Teacher 1-5 Years Experience (Count)",teacher_6_10_years_full_time_equiv:"Teacher 6-10 Years Experience (Count)",teacher_11_20_years_full_time_equiv:"Teacher 11-20 Years Experience (Count)",teacher_20_years_full_time_equiv:"Teacher 20 Years+ Experience (Count)",teacher_1_5_years_base_salary:"Teacher Average Salary 1-5 Years Experience ($)",teacher_6_10_years_base_salary:"Teacher Average Salary 6-10 Years Experience ($)",teacher_11_20_years_base_salary:"Teacher Average Salary 11-20 Years Experience ($)",teacher_male_full_time_equiv:"Full Time Male Teachers (Count)",teacher_female_full_time_equiv:"Full Time Female Teachers (Count)",teacher_no_degree_full_time_equiv:"Teachers with no Degree (Count)",teacher_ba_degree_full_time_equiv:"Teachers with Bachelors Degree (Count)",teacher_ms_degree_full_time_equiv:"Teachers with Masters Degree (Count)",teacher_student_ratio:"Teacher Student Ratio (Ratio)",all_students:"Number of Students (Count)",white:"Number of White Students",african_american:"Number of African Amercian Students",hispanic:"Number of Hispanic Students",at_risk:"Number of At Risk Students",economic_disadvant:"Number of Economic Disadvantaged Students",Grade_Leve_Elementary:0,"Grade_Leve_Elementary/Secondary":0,"Grade_Leve_High School":0,"Grade_Leve_Junior High":0,Grade_Leve_Middle:0,new_rate:"Student Performance (Meets Standards,%)"};function j(e){return Object(r.jsx)("div",{class:"flex-parent flex-parent--center-main",children:Object(r.jsx)("div",{className:"toggle-group",children:g.map((function(t){return Object(r.jsxs)("label",{className:"toggle-container pt12 pb24",children:[Object(r.jsx)("input",{onChange:e.handleViewChange,checked:e.checkedValue===t,value:t,name:"toggle",type:"radio"},t),Object(r.jsx)("div",{className:"toggle toggle--s ",children:t})]},t)}))})})}function q(e){var t=e.features.map((function(e){return Object(r.jsx)("option",{value:e,children:x[e]},e)})),a=e.prediction_features.map((function(t){return Object(r.jsxs)("div",{className:"flex-parent flex-parent--space-between-main",children:[Object(r.jsxs)("div",{className:"flex-child",children:[Object(r.jsx)("button",{className:"btn btn--stroke btn--s",name:"minus",value:t,onClick:e.ChangePredictor,children:"-"},t)," "]}),Object(r.jsx)("span",{className:"txt-s",children:x[t]}),Object(r.jsx)("div",{className:"flex-child",children:Object(r.jsx)("button",{name:"plus",className:"btn btn--stroke btn--s",value:t,onClick:e.ChangePredictor,children:"+"},t)})]})}));return"2019 School Data"===e.SelectedMode||"2019 District Data"===e.SelectedMode?Object(r.jsxs)("div",{className:"inline-block mr6",children:[Object(r.jsx)("p",{className:"txt-s txt-em",children:"Select a variable to change the data displayed on the map."}),Object(r.jsxs)("div",{className:"select-container",children:[Object(r.jsx)("select",{onChange:e.handleFeatureChange,value:e.featureValue,className:"select mb24 mt12 txt-m",children:t}),Object(r.jsx)("div",{className:"select-arrow"})]})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{className:"txt-m txt-em",children:" Manipulate a variable to to see how it impacts Student Performance."}),a]})}var S,C,O=function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"sidebarStyle prose px12 py12",children:[Object(r.jsx)("h3",{children:"Texas Education Data Map"}),Object(r.jsx)("p",{className:"txt-h5",children:"Visualizing and Predicting student performance using historical achievement data from Texas Education Agency"}),Object(r.jsx)(j,{checkedValue:e.view,handleViewChange:e.onViewChange}),Object(r.jsx)(q,{SelectedMode:e.view,featureValue:e.feature,handleFeatureChange:e.onFeatureChange,features:e.features,prediction_features:e.prediction_features,ChangePredictor:e.onChangePredictor})]})})},w=a(92);b.a.accessToken="pk.eyJ1Ijoic2FhZGlxbSIsImEiOiJjamJpMXcxa3AyMG9zMzNyNmdxNDlneGRvIn0.wjlI8r1S_-xxtq2d-W5qPA";var T=w.f([38.757244,2.3383005,52369.898,11.495037,7.4352322,11.252988,5.6235461,47844.457,49755.422,53323.277,6.2867398,32.471012,.37395945,29.658897,8.5517073,14.846865,590.74255,159.47319,73.754135,313.39368,304.23239,365.59244,.68009603,.057097118,.011472786,.033084311,.21824974]),N=w.f([281.34167,1.4098845,31503316,54.365643,21.699398,41.067871,14.653924,69142848,94045168,81127272,41.826641,185.42195,2.5298369,160.23384,35.409,7.6856813,78096.984,26095.008,10486.014,56837.34,37762.898,52971.285,.21756542,.053837039,.011341161,.031989738,.17061679]),P={teacher_total_full_time_equiv:"Full Time Teachers (Count)",school_admin_total_full_time_equiv:"Full Time Admin Staff (Count)",teacher_total_base_salary:"Teacher Average Base Salary ($)",teacher_1_5_years_full_time_equiv:"Teacher 1-5 Years Experience (Count)",teacher_6_10_years_full_time_equiv:"Teacher 6-10 Years Experience (Count)",teacher_11_20_years_full_time_equiv:"Teacher 11-20 Years Experience (Count)",teacher_20_years_full_time_equiv:"Teacher 20 Years+ Experience (Count)",teacher_1_5_years_base_salary:"Teacher Average Salary 1-5 Years Experience ($)",teacher_6_10_years_base_salary:"Teacher Average Salary 6-10 Years Experience ($)",teacher_11_20_years_base_salary:"Teacher Average Salary 11-20 Years Experience ($)",teacher_male_full_time_equiv:"Full Time Male Teachers (Count)",teacher_female_full_time_equiv:"Full Time Female Teachers (Count)",teacher_no_degree_full_time_equiv:"Teachers with no Degree (Count)",teacher_ba_degree_full_time_equiv:"Teachers with Bachelors Degree (Count)",teacher_ms_degree_full_time_equiv:"Teachers with Masters Degree (Count)",teacher_student_ratio:"Teacher Student Ratio (Ratio)",all_students:"Number of Students (Count)",white:"Number of White Students",african_american:"Number of African Amercian Students",hispanic:"Number of Hispanic Students",at_risk:"Number of At Risk Students",economic_disadvant:"Number of Economic Disadvantaged Students",Grade_Leve_Elementary:0,"Grade_Leve_Elementary/Secondary":0,"Grade_Leve_High School":0,"Grade_Leve_Junior High":0,Grade_Leve_Middle:0,new_rate:"Student Performance (Meets Standards,%)"},k=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.b("https://texas-education.s3-us-west-2.amazonaws.com/model.json");case 2:S=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=w.a.csv("https://texas-education.s3-us-west-2.amazonaws.com/default_data.csv",{hasHeader:!0}).prefetch(100).batch(100),C=t;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=["new_rate","teacher_total_full_time_equiv","teacher_total_base_salary","teacher_1_5_years_full_time_equiv","teacher_6_10_years_full_time_equiv","teacher_11_20_years_full_time_equiv","teacher_20_years_full_time_equiv","teacher_1_5_years_base_salary","teacher_6_10_years_base_salary","teacher_11_20_years_base_salary","teacher_male_full_time_equiv","teacher_female_full_time_equiv","teacher_ba_degree_full_time_equiv","teacher_ms_degree_full_time_equiv","teacher_student_ratio","white","african_american","hispanic","at_risk","economic_disadvant"],L=["teacher_total_full_time_equiv","school_admin_total_full_time_equiv","teacher_total_base_salary","teacher_1_5_years_full_time_equiv","teacher_6_10_years_full_time_equiv","teacher_11_20_years_full_time_equiv","teacher_20_years_full_time_equiv","teacher_1_5_years_base_salary","teacher_6_10_years_base_salary","teacher_11_20_years_base_salary","teacher_male_full_time_equiv","teacher_female_full_time_equiv","teacher_no_degree_full_time_equiv","teacher_ba_degree_full_time_equiv","teacher_ms_degree_full_time_equiv","teacher_student_ratio"],G=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={score:[],feature:"new_rate",mode:"2019 School Data",teacher_total_full_time_equiv:0,school_admin_total_full_time_equiv:0,teacher_total_base_salary:0,teacher_1_5_years_full_time_equiv:0,teacher_6_10_years_full_time_equiv:0,teacher_11_20_years_full_time_equiv:0,teacher_20_years_full_time_equiv:0,teacher_1_5_years_base_salary:0,teacher_6_10_years_base_salary:0,teacher_11_20_years_base_salary:0,teacher_male_full_time_equiv:0,teacher_female_full_time_equiv:0,teacher_no_degree_full_time_equiv:0,teacher_ba_degree_full_time_equiv:0,teacher_ms_degree_full_time_equiv:0,teacher_student_ratio:0,all_students:0,white:0,african_american:0,hispanic:0,at_risk:0,economic_disadvant:0,Grade_Leve_Elementary:0,"Grade_Leve_Elementary/Secondary":0,"Grade_Leve_High School":0,"Grade_Leve_Junior High":0,Grade_Leve_Middle:0},r.handleFeatureChange=r.handleFeatureChange.bind(Object(d.a)(r)),r.handleViewChange=r.handleViewChange.bind(Object(d.a)(r)),r.handleChangePredictor=r.handleChangePredictor.bind(Object(d.a)(r)),r.updatePredictions=r.updatePredictions.bind(Object(d.a)(r)),r.updatedPredictionGeometry=r.updatedPredictionGeometry.bind(Object(d.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.map=new b.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[-99.027878,31.319759],zoom:6,maxZoom:12,minZoom:1}),this.map.on("load",(function(){e.map.addSource("schools",{type:"vector",url:"mapbox://saadiqm.bjpfp46f"}),e.map.addSource("districts",{type:"vector",url:"mapbox://saadiqm.4nsi58ow"}),e.map.addSource("prediction",{type:"geojson",data:"https://texas-education.s3-us-west-2.amazonaws.com/2019_rates.geojson"}),e.map.addLayer({id:"2019 School Data",type:"circle",source:"schools","source-layer":"schools2019v2-5et1pd",paint:{"circle-opacity":.4,"circle-color":"purple","circle-radius":["interpolate",["exponential",2],["zoom"],10,["/",["sqrt",["get",e.state.feature]],4],14,["sqrt",["get",e.state.feature]]]}}),e.map.addLayer({id:"2019 District Data",type:"fill",source:"districts","source-layer":"2019_districts-0ch1eu",layout:{visibility:"none"},paint:{"fill-color":["interpolate",["linear"],["get","teacher_1_5_years_full_time_equiv"],0,"red",100,"blue"],"fill-opacity":.5}}),e.map.addLayer({id:"Predict Student Performance",type:"circle",source:"prediction",layout:{visibility:"none"},paint:{"circle-opacity":.5,"circle-color":"purple","circle-radius":["interpolate",["exponential",3],["zoom"],7,["/",["sqrt",["get","new_rate"]],4],11,["*",["sqrt",["get","new_rate"]],2]]}})})),this.popup=new b.a.Popup({closeButton:!1,closeOnClick:!1}),this.map.on("mouseenter","2019 School Data",this.popupEnter.bind(this)),this.map.on("mouseleave","2019 School Data",this.popupLeave.bind(this)),E(),k()}},{key:"componentDidUpdate",value:function(){console.log(w.c())}},{key:"updatePredictions",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,C.forEachAsync((function(e){w.g((function(){var r=[];for(var i in e){var n=w.d(a.state[i]),s=e[i].add(n);r.push(s)}var c=w.e(r,1),_=c.sub(T),o=_.div(N),u=S.predict(o).dataSync();c.dispose(),_.dispose(),o.dispose(),t=[].concat(Object(l.a)(t),Object(l.a)(u))}))}));case 3:this.setState({score:t},(function(){}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatedPredictionGeometry",value:function(){var e=this;fetch("https://texas-education.s3-us-west-2.amazonaws.com/2019_rates.geojson").then((function(e){return e.json()})).then((function(t){t.features.map((function(t,a){t.properties.new_rate=e.state.score[a]})),e.map.getSource("prediction").setData(t)}))}},{key:"popupEnter",value:function(e){this.map.getCanvas().style.cursor="pointer";for(var t=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties[this.state.feature],i=Object(r.jsxs)("div",{className:"prose",children:[Object(r.jsx)("p",{className:"txt-h5 txt-bold",children:P[this.state.feature]}),Object(r.jsx)("p",{className:"txt-l",children:a})]});Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;var n=document.createElement("div");c.a.render(i,n),this.popup.setLngLat(t).setDOMContent(n).addTo(this.map)}},{key:"popupLeave",value:function(e){this.map.getCanvas().style.cursor="",this.popup.remove()}},{key:"handleFeatureChange",value:function(e){var t=this;e.preventDefault(),this.setState({feature:e.target.value},(function(){var e=null;"2019 School Data"!==t.state.mode&&"Prediction"!==t.state.mode||(e=t.state.feature.includes("salary")?["interpolate",["exponential",2],["zoom"],10,["/",["get",t.state.feature],1e4],14,["/",["get",t.state.feature],1e4]]:t.state.feature.includes("equiv")?["interpolate",["exponential",2],["zoom"],10,["*",["get",t.state.feature],.1],14,["*",["get",t.state.feature],1]]:"teacher_student_ratio"===t.state.feature?["interpolate",["exponential",3],["zoom"],7,["/",["get",t.state.feature],7],11,["*",["get",t.state.feature],1.5]]:"all_students"===t.state.feature?["interpolate",["exponential",2],["zoom"],5,["/",["sqrt",["get",t.state.feature]],7],14,["/",["sqrt",["get",t.state.feature]],2]]:["interpolate",["exponential",3],["zoom"],7,["/",["sqrt",["get",t.state.feature]],5],11,["*",["sqrt",["get",t.state.feature]],1.5]]),t.map.setPaintProperty(t.state.mode,"circle-radius",e)}))}},{key:"handleViewChange",value:function(e){var t=this,a=this.state.mode;this.setState({mode:e.target.value},(function(){t.map.setLayoutProperty(t.state.mode,"visibility","visible"),t.map.setLayoutProperty(a,"visibility","none"),console.log(t.state.mode)}))}},{key:"handleChangePredictor",value:function(e){var t=this,a=e.target.value;"minus"===e.target.name?this.setState(Object(_.a)({},a,this.state[a]-10),(function(){t.updatePredictions(),t.updatedPredictionGeometry(),console.log(t.state[a])})):this.setState(Object(_.a)({},a,this.state[a]+10),(function(){t.updatePredictions(),t.updatedPredictionGeometry(),console.log(t.state[a])}))}},{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{children:[Object(r.jsx)(O,{feature:this.state.feature,onFeatureChange:this.handleFeatureChange,view:this.state.mode,onViewChange:this.handleViewChange,features:D,prediction_features:L,onChangePredictor:this.handleChangePredictor}),Object(r.jsx)("div",{ref:function(t){return e.mapContainer=t},className:"mapContainer"})]})}}]),a}(n.a.Component);c.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(G,{})}),document.getElementById("root"))}},[[298,1,2]]]);
//# sourceMappingURL=main.4bfe7b6d.chunk.js.map