{"version":3,"sources":["SideBarContainer.js","App.js","index.js"],"names":["options","feature_dict","SelectMode","props","class","className","map","option","onChange","handleViewChange","checked","checkedValue","value","name","type","UserInput","optionItems","features","feature","predict_options","prediction_features","onClick","ChangePredictor","SelectedMode","handleFeatureChange","featureValue","SideBar","model","default_data","view","onViewChange","onFeatureChange","onChangePredictor","mapboxgl","accessToken","u","tf","s","predict","a","getDefaultData","csvDataset","csv","hasHeader","prefetch","batch","App","state","score","mode","bind","handleChangePredictor","updatePredictions","updatedPredictionGeometry","this","Map","container","mapContainer","style","center","zoom","maxZoom","minZoom","on","addSource","addLayer","popup","Popup","closeButton","closeOnClick","popupEnter","popupLeave","console","log","myscores","forEachAsync","e","key","k","m","add","push","b","c","sub","d","div","predictions","dataSync","dispose","setState","fetch","then","response","json","data","index","properties","new_rate","getSource","setData","getCanvas","cursor","coordinates","geometry","slice","description","text","Math","abs","lngLat","lng","placeholder","document","createElement","ReactDOM","render","setLngLat","setDOMContent","addTo","remove","preventDefault","target","paint_property","includes","setPaintProperty","previousState","setLayoutProperty","ref","el","React","Component","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4bfe7b6d.chunk.js","sourcesContent":["import React from \"react\"\n\nlet options = [\"2019 School Data\",\"Predict Student Performance\"]\n\nlet feature_dict = {\n    \"teacher_total_full_time_equiv\":\"Full Time Teachers (Count)\", \n      \"school_admin_total_full_time_equiv\":\"Full Time Admin Staff (Count)\",\n      \"teacher_total_base_salary\":\"Teacher Average Base Salary ($)\",\n      \"teacher_1_5_years_full_time_equiv\":\"Teacher 1-5 Years Experience (Count)\",\n      \"teacher_6_10_years_full_time_equiv\":\"Teacher 6-10 Years Experience (Count)\",\n      \"teacher_11_20_years_full_time_equiv\":\"Teacher 11-20 Years Experience (Count)\",\n      \"teacher_20_years_full_time_equiv\":\"Teacher 20 Years+ Experience (Count)\",\n      \"teacher_1_5_years_base_salary\":\"Teacher Average Salary 1-5 Years Experience ($)\",\n      \"teacher_6_10_years_base_salary\":\"Teacher Average Salary 6-10 Years Experience ($)\",\n      \"teacher_11_20_years_base_salary\":\"Teacher Average Salary 11-20 Years Experience ($)\",\n      \"teacher_male_full_time_equiv\":\"Full Time Male Teachers (Count)\",\n      \"teacher_female_full_time_equiv\":\"Full Time Female Teachers (Count)\",\n      \"teacher_no_degree_full_time_equiv\":\"Teachers with no Degree (Count)\",\n      \"teacher_ba_degree_full_time_equiv\":\"Teachers with Bachelors Degree (Count)\",\n      \"teacher_ms_degree_full_time_equiv\":\"Teachers with Masters Degree (Count)\",\n      \"teacher_student_ratio\":\"Teacher Student Ratio (Ratio)\",\n      \"all_students\":\"Number of Students (Count)\",\n      \"white\":\"Number of White Students\",\n      \"african_american\":\"Number of African Amercian Students\",\n      \"hispanic\":\"Number of Hispanic Students\",\n      \"at_risk\":\"Number of At Risk Students\",\n      \"economic_disadvant\":\"Number of Economic Disadvantaged Students\",\n      \"Grade_Leve_Elementary\":0,\n      \"Grade_Leve_Elementary/Secondary\":0,\n      \"Grade_Leve_High School\":0,\n      \"Grade_Leve_Junior High\":0,\n      \"Grade_Leve_Middle\":0,\n      \"new_rate\":\"Student Performance (Meets Standards,%)\"\n}\n\n// function SelectFeature(props){\n\n\n//     let optionItems = features.map((feature) => <option key={feature} value={feature}>{feature}</option>);\n\n//     return(\n//       <div className=\"inline-block mr6\">\n//         <div className=\"select-container\">\n//           <select onChange={props.handleFeatureChange} value={props.featureValue} className=\"select select--border-yellow mb6 txt-s\">\n//                 {optionItems}\n//           </select>\n//           <div className=\"select-arrow\"></div>\n//         </div>\n//       </div>\n//     )\n// }\n\nfunction SelectMode(props){\n\n    const renderOptions = (option) => {\n        return (\n          <label key={option} className=\"toggle-container pt12 pb24\">\n            <input onChange={props.handleViewChange} checked={props.checkedValue===option} key={option} value={option} name=\"toggle\" type=\"radio\" />\n            <div className=\"toggle toggle--s \">{option}</div>\n          </label>\n        );\n      }\n  \n    return(\n        <div class='flex-parent flex-parent--center-main'>\n            <div className='toggle-group'>\n                {options.map(renderOptions)}\n            </div>\n        </div>\n    )\n\n}\n\nfunction UserInput(props){\n\n    let optionItems = props.features.map((feature) => <option key={feature} value={feature}>{feature_dict[feature]}</option>);\n\n    let predict_options = props.prediction_features.map((feature) => {\n        return (<div className='flex-parent flex-parent--space-between-main'>\n                    <div className='flex-child'><button className='btn btn--stroke btn--s' name = \"minus\" key={feature} value={feature} onClick={props.ChangePredictor}>-</button> </div>\n                    \n                        <span className=\"txt-s\">{feature_dict[feature]}</span>\n                    \n                    <div className='flex-child'><button name = \"plus\" className='btn btn--stroke btn--s' key={feature} value={feature} onClick={props.ChangePredictor}>+</button></div>\n                </div>)\n    });\n\n    if(props.SelectedMode===\"2019 School Data\" ||props.SelectedMode===\"2019 District Data\"  ){\n        return(\n            \n            <div className=\"inline-block mr6\">\n                 <p className=\"txt-s txt-em\">Select a variable to change the data displayed on the map.</p>\n               \n                <div className=\"select-container\">\n                    <select onChange={props.handleFeatureChange} value={props.featureValue} className=\"select mb24 mt12 txt-m\">\n                        {optionItems}\n                    </select>\n                    <div className=\"select-arrow\"></div>\n                </div>\n            </div>\n        )\n    }else{\n        return(\n            <div>\n                <p className=\"txt-m txt-em\"> Manipulate a variable to to see how it impacts Student Performance.</p>\n\n                {predict_options}\n            </div>\n\n      \n        )\n    }\n\n    \n}\n\n\nfunction SideBar(props) {\n    return (\n        <div>\n        <div className='sidebarStyle prose px12 py12'>\n\n            <h3>Texas Education Data Map</h3>\n            <p className=\"txt-h5\">Visualizing and Predicting student performance using historical achievement data from Texas Education Agency</p>\n\n\n            <SelectMode checkedValue={props.view} handleViewChange={props.onViewChange}/>\n            {/* <SelectFeature featureValue={props.feature} handleFeatureChange={props.onFeatureChange}/> */}\n\n           \n            <UserInput \n                SelectedMode = {props.view} \n                featureValue={props.feature} \n                handleFeatureChange={props.onFeatureChange}\n                features = {props.features}\n                prediction_features = {props.prediction_features}\n                ChangePredictor = {props.onChangePredictor}\n            />\n\n\n           \n        </div>\n\n        </div>\n\n    )\n}\n\nexport default SideBar\n\n\n\n\n","import React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport SideBar from \"./SideBarContainer\"\nimport ReactDOM from 'react-dom';\nimport * as tf from '@tensorflow/tfjs';\n\nlet model;\nlet default_data;\n// let scores =[]\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoic2FhZGlxbSIsImEiOiJjamJpMXcxa3AyMG9zMzNyNmdxNDlneGRvIn0.wjlI8r1S_-xxtq2d-W5qPA';\n\nconst csvUrl =\n'https://texas-education.s3-us-west-2.amazonaws.com/default_data.csv';\n\nlet u = tf.tensor1d([3.8757244e+01, 2.3383005e+00, 5.2369898e+04, 1.1495037e+01,\n  7.4352322e+00, 1.1252988e+01, 5.6235461e+00, 4.7844457e+04,\n  4.9755422e+04, 5.3323277e+04, 6.2867398e+00, 3.2471012e+01,\n  3.7395945e-01, 2.9658897e+01, 8.5517073e+00, 1.4846865e+01,\n  5.9074255e+02, 1.5947319e+02, 7.3754135e+01, 3.1339368e+02,\n  3.0423239e+02, 3.6559244e+02, 6.8009603e-01, 5.7097118e-02,\n  1.1472786e-02, 3.3084311e-02, 2.1824974e-01])\n\nlet s = tf.tensor1d([2.8134167e+02, 1.4098845e+00, 3.1503316e+07, 5.4365643e+01,\n  2.1699398e+01, 4.1067871e+01, 1.4653924e+01, 6.9142848e+07,\n  9.4045168e+07, 8.1127272e+07, 4.1826641e+01, 1.8542195e+02,\n  2.5298369e+00, 1.6023384e+02, 3.5409000e+01, 7.6856813e+00,\n  7.8096984e+04, 2.6095008e+04, 1.0486014e+04, 5.6837340e+04,\n  3.7762898e+04, 5.2971285e+04, 2.1756542e-01, 5.3837039e-02,\n  1.1341161e-02, 3.1989738e-02, 1.7061679e-01])\n\nlet feature_dict = {\n  \"teacher_total_full_time_equiv\":\"Full Time Teachers (Count)\", \n    \"school_admin_total_full_time_equiv\":\"Full Time Admin Staff (Count)\",\n    \"teacher_total_base_salary\":\"Teacher Average Base Salary ($)\",\n    \"teacher_1_5_years_full_time_equiv\":\"Teacher 1-5 Years Experience (Count)\",\n    \"teacher_6_10_years_full_time_equiv\":\"Teacher 6-10 Years Experience (Count)\",\n    \"teacher_11_20_years_full_time_equiv\":\"Teacher 11-20 Years Experience (Count)\",\n    \"teacher_20_years_full_time_equiv\":\"Teacher 20 Years+ Experience (Count)\",\n    \"teacher_1_5_years_base_salary\":\"Teacher Average Salary 1-5 Years Experience ($)\",\n    \"teacher_6_10_years_base_salary\":\"Teacher Average Salary 6-10 Years Experience ($)\",\n    \"teacher_11_20_years_base_salary\":\"Teacher Average Salary 11-20 Years Experience ($)\",\n    \"teacher_male_full_time_equiv\":\"Full Time Male Teachers (Count)\",\n    \"teacher_female_full_time_equiv\":\"Full Time Female Teachers (Count)\",\n    \"teacher_no_degree_full_time_equiv\":\"Teachers with no Degree (Count)\",\n    \"teacher_ba_degree_full_time_equiv\":\"Teachers with Bachelors Degree (Count)\",\n    \"teacher_ms_degree_full_time_equiv\":\"Teachers with Masters Degree (Count)\",\n    \"teacher_student_ratio\":\"Teacher Student Ratio (Ratio)\",\n    \"all_students\":\"Number of Students (Count)\",\n    \"white\":\"Number of White Students\",\n    \"african_american\":\"Number of African Amercian Students\",\n    \"hispanic\":\"Number of Hispanic Students\",\n    \"at_risk\":\"Number of At Risk Students\",\n    \"economic_disadvant\":\"Number of Economic Disadvantaged Students\",\n    \"Grade_Leve_Elementary\":0,\n    \"Grade_Leve_Elementary/Secondary\":0,\n    \"Grade_Leve_High School\":0,\n    \"Grade_Leve_Junior High\":0,\n    \"Grade_Leve_Middle\":0,\n    \"new_rate\":\"Student Performance (Meets Standards,%)\"\n}\n\n\nconst predict = async () => {\n  model = await tf.loadLayersModel('https://texas-education.s3-us-west-2.amazonaws.com/model.json')\n}\n\nconst getDefaultData = async () =>{\n  const csvDataset = tf.data.csv(\n    csvUrl, {\n      hasHeader:true\n    }).prefetch(100).batch(100);\n\n  default_data = csvDataset\n\n\n    // const tensors = await csvDataset.toArray();\n    // let a = csvDataset.take(3)\n    // await a.forEachAsync(e => console.log(e));\n    // console.log(tensors)\n\n}\n\n\n\nlet features = [\"new_rate\",\"teacher_total_full_time_equiv\", \n  \"teacher_total_base_salary\",\n  \"teacher_1_5_years_full_time_equiv\",\n  \"teacher_6_10_years_full_time_equiv\",\n  \"teacher_11_20_years_full_time_equiv\",\n  \"teacher_20_years_full_time_equiv\",\n  \"teacher_1_5_years_base_salary\",\n  \"teacher_6_10_years_base_salary\",\n  \"teacher_11_20_years_base_salary\",\n  \"teacher_male_full_time_equiv\",\n  \"teacher_female_full_time_equiv\",\n  \"teacher_ba_degree_full_time_equiv\",\n  \"teacher_ms_degree_full_time_equiv\",\n  \"teacher_student_ratio\",\n  \"white\",\n  \"african_american\",\n  \"hispanic\",\n  \"at_risk\",\n  \"economic_disadvant\"]\n\nlet prediction_features = [\n  \"teacher_total_full_time_equiv\", \n  \"school_admin_total_full_time_equiv\",\n  \"teacher_total_base_salary\",\n  \"teacher_1_5_years_full_time_equiv\",\n  \"teacher_6_10_years_full_time_equiv\",\n  \"teacher_11_20_years_full_time_equiv\",\n  \"teacher_20_years_full_time_equiv\",\n  \"teacher_1_5_years_base_salary\",\n  \"teacher_6_10_years_base_salary\",\n  \"teacher_11_20_years_base_salary\",\n  \"teacher_male_full_time_equiv\",\n  \"teacher_female_full_time_equiv\",\n  \"teacher_no_degree_full_time_equiv\",\n  \"teacher_ba_degree_full_time_equiv\",\n  \"teacher_ms_degree_full_time_equiv\",\n  \"teacher_student_ratio\",\n]\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      score:[],\n      feature: 'new_rate',\n      mode: \"2019 School Data\",\n      \"teacher_total_full_time_equiv\":0, \n      \"school_admin_total_full_time_equiv\":0,\n      \"teacher_total_base_salary\":0,\n      \"teacher_1_5_years_full_time_equiv\":0,\n      \"teacher_6_10_years_full_time_equiv\":0,\n      \"teacher_11_20_years_full_time_equiv\":0,\n      \"teacher_20_years_full_time_equiv\":0,\n      \"teacher_1_5_years_base_salary\":0,\n      \"teacher_6_10_years_base_salary\":0,\n      \"teacher_11_20_years_base_salary\":0,\n      \"teacher_male_full_time_equiv\":0,\n      \"teacher_female_full_time_equiv\":0,\n      \"teacher_no_degree_full_time_equiv\":0,\n      \"teacher_ba_degree_full_time_equiv\":0,\n      \"teacher_ms_degree_full_time_equiv\":0,\n      \"teacher_student_ratio\":0,\n      \"all_students\":0,\n      \"white\":0,\n      \"african_american\":0,\n      \"hispanic\":0,\n      \"at_risk\":0,\n      \"economic_disadvant\":0,\n      \"Grade_Leve_Elementary\":0,\n      \"Grade_Leve_Elementary/Secondary\":0,\n      \"Grade_Leve_High School\":0,\n      \"Grade_Leve_Junior High\":0,\n      \"Grade_Leve_Middle\":0\n    };\n\n    this.handleFeatureChange = this.handleFeatureChange.bind(this);\n    this.handleViewChange = this.handleViewChange.bind(this);\n    this.handleChangePredictor = this.handleChangePredictor.bind(this)\n    this.updatePredictions = this.updatePredictions.bind(this)\n    this.updatedPredictionGeometry = this.updatedPredictionGeometry.bind(this)\n\n  }\n\n  componentDidMount() {\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/mapbox/streets-v11',\n      center: [-99.027878, 31.319759],\n      zoom: 6,\n      maxZoom: 12,\n      minZoom: 1\n    });\n\n    this.map.on('load', () => {\n\n      this.map.addSource('schools', {\n        'type': 'vector',\n        'url': 'mapbox://saadiqm.bjpfp46f'\n      });\n\n      this.map.addSource('districts', {\n        'type': 'vector',\n        'url': 'mapbox://saadiqm.4nsi58ow'\n      });\n\n      this.map.addSource('prediction', {\n        'type': 'geojson',\n        'data': 'https://texas-education.s3-us-west-2.amazonaws.com/2019_rates.geojson'\n      });\n\n\n      this.map.addLayer({\n        'id': '2019 School Data',\n        'type': 'circle',\n        'source': 'schools',\n        'source-layer': 'schools2019v2-5et1pd',\n        // 'minzoom':zoomthreshold-1,\n        'paint': {\n          'circle-opacity': 0.4,\n          'circle-color': \"purple\",\n          'circle-radius': [\n            'interpolate', ['exponential',2], ['zoom'],\n            10,['/',[\"sqrt\", ['get', this.state.feature]],4],\n            14,[\"sqrt\", ['get', this.state.feature]],\n          ]\n        },\n        \n      })\n\n      this.map.addLayer({\n        'id': '2019 District Data',\n        'type': 'fill',\n        'source': 'districts',\n        'source-layer': '2019_districts-0ch1eu',\n        // 'maxzoom':zoomthreshold,\n        \"layout\":{\n          \"visibility\":\"none\"\n        },\n        'paint': {\n          'fill-color': [\n            'interpolate',\n            ['linear'],\n            ['get', 'teacher_1_5_years_full_time_equiv'],\n            0,\n            'red',\n            100,\n            'blue'\n            ],\n          'fill-opacity': 0.5,\n        }\n      })\n\n      this.map.addLayer({\n        'id': 'Predict Student Performance',\n        'type': 'circle',\n        'source': 'prediction',\n        \"layout\":{\n          \"visibility\":\"none\"\n        },\n        // 'maxzoom':zoomthreshold,\n        'paint': {\n          'circle-opacity': 0.5,\n          'circle-color': \"purple\",\n          'circle-radius': [\n            'interpolate', ['exponential',3], ['zoom'],\n            7,['/',[\"sqrt\", ['get', 'new_rate']],4],\n            11,['*',[\"sqrt\", ['get', 'new_rate']],2],\n          ]\n        },\n      })\n\n    })\n\n    this.popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n\n\n    this.map.on('mouseenter', '2019 School Data', this.popupEnter.bind(this));\n    this.map.on('mouseleave', '2019 School Data', this.popupLeave.bind(this));\n\n    getDefaultData()\n    predict()\n\n    \n\n  }\n\n  componentDidUpdate(){\n    console.log(tf.memory());\n  }\n  \n  async updatePredictions(){\n\n    let myscores = []\n\n    await default_data.forEachAsync(e => {\n\n      const y = tf.tidy(() => {\n        let a = []\n\n        for (var key in e) {\n  \n          const k = tf.scalar(this.state[key]);\n          const m = e[key].add(k)\n          a.push(m)\n  \n        }\n  \n        let b = tf.stack(a,1);\n  \n        // scale the input \n        let c = b.sub(u)\n        let d = c.div(s)\n        \n        let predictions = model.predict(d).dataSync()\n  \n        b.dispose()\n        c.dispose()\n        d.dispose()\n  \n        myscores = [...myscores, ...predictions]\n  \n      });\n   \n    });\n\n\n\n    this.setState({score:myscores},()=>{\n      // console.log(this.state.score)\n    })\n\n  }\n\n  updatedPredictionGeometry(){\n\n    fetch('https://texas-education.s3-us-west-2.amazonaws.com/2019_rates.geojson')\n    .then(response => response.json())\n    .then(data => {\n      data.features.map((feature, index) =>{\n        feature.properties.new_rate = this.state.score[index]\n      })\n\n      this.map.getSource('prediction').setData(data);\n      // console.log(data)\n    });\n\n  }\n\n\n  popupEnter(e){\n    this.map.getCanvas().style.cursor = 'pointer';\n\n      var coordinates = e.features[0].geometry.coordinates.slice();\n      var description = e.features[0].properties[this.state.feature];\n\n      let text = <div className=\"prose\">\n      <p className=\"txt-h5 txt-bold\">{feature_dict[this.state.feature]}</p>\n      <p className=\"txt-l\">{description}</p>\n      </div>\n\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n       }\n\n      const placeholder = document.createElement('div');\n      ReactDOM.render(text, placeholder);\n\n      this.popup.setLngLat(coordinates).setDOMContent(placeholder).addTo(this.map);\n  }\n\n  popupLeave(e){\n    this.map.getCanvas().style.cursor = '';\n    this.popup.remove();\n  }\n\n  handleFeatureChange(e){\n    e.preventDefault();\n\n    this.setState({feature:e.target.value}, () => {\n\n      let paint_property = null\n\n      if(this.state.mode===\"2019 School Data\" || this.state.mode===\"Prediction\" ){\n\n        if(this.state.feature.includes(\"salary\")){\n          paint_property = [\n            'interpolate', ['exponential',2], ['zoom'],\n            10,['/',['get', this.state.feature],10000],\n            14,['/',['get', this.state.feature],10000],\n          ]\n        }else if(this.state.feature.includes(\"equiv\")){\n          paint_property = [\n            'interpolate', ['exponential',2], ['zoom'],\n            10,['*',['get', this.state.feature],0.1],\n            14,['*',['get', this.state.feature],1],\n          ]\n        }else if(this.state.feature===\"teacher_student_ratio\"){\n          paint_property = [\n            'interpolate', ['exponential',3], ['zoom'],\n            7,['/',['get', this.state.feature],7],\n            11,['*',['get', this.state.feature],1.5],\n          ]\n        }else if(this.state.feature===\"all_students\"){\n          paint_property = [\n            'interpolate', ['exponential',2], ['zoom'],\n            5,['/',[\"sqrt\", ['get', this.state.feature]],7],\n            14,['/',[\"sqrt\", ['get', this.state.feature]],2],\n          ]\n        }else{\n          paint_property = [\n            'interpolate', ['exponential',3], ['zoom'],\n            7,['/',[\"sqrt\", ['get', this.state.feature]],5],\n            11,['*',[\"sqrt\", ['get', this.state.feature]],1.5],\n          ]\n        }\n\n      }else{\n\n      }\n\n      this.map.setPaintProperty(this.state.mode, 'circle-radius', paint_property);\n\n    })\n    // this.map.setPaintProperty('districts', 'fill-color', [\n    //   'interpolate',\n    //   ['linear'],\n    //   ['get', e.target.value],\n    //   0,\n    //   'red',\n    //   100,\n    //   'blue'\n    // ]);\n\n  }\n\n  handleViewChange(e) {\n    let previousState = this.state.mode\n    this.setState({mode:e.target.value}, () => {\n\n      this.map.setLayoutProperty(this.state.mode, 'visibility', 'visible');\n      this.map.setLayoutProperty(previousState, 'visibility', 'none');\n      console.log(this.state.mode)\n    });\n  }\n\n  handleChangePredictor(e){\n    let feature = e.target.value\n\n    if (e.target.name === 'minus') {\n    \n      this.setState({[feature]:this.state[feature]-10},()=>{\n        this.updatePredictions()\n        this.updatedPredictionGeometry()\n        console.log(this.state[feature])\n      })\n\n\n    } else {\n      this.setState({[feature]:this.state[feature]+10},()=>{\n        this.updatePredictions()\n        this.updatedPredictionGeometry()\n        console.log(this.state[feature])\n      })\n    }\n\n  }\n\n  render() {\n    return (\n      <div>\n        <SideBar \n          feature={this.state.feature}\n          onFeatureChange={this.handleFeatureChange}\n          view={this.state.mode}\n          onViewChange={this.handleViewChange}\n          features = {features}\n          prediction_features = {prediction_features}\n          onChangePredictor = {this.handleChangePredictor}\n        />\n        <div ref={el => this.mapContainer = el} className='mapContainer' />\n      </div>\n    )\n  }\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}